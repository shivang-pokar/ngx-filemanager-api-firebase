import * as path from 'path';
function HasPrefixSlash(inputPath) {
    if (!inputPath || !inputPath.length) {
        return false;
    }
    const hasPrefix = inputPath.startsWith('/');
    return hasPrefix;
}
function HasTrailingSlash(inputPath) {
    if (!inputPath || !inputPath.length) {
        return false;
    }
    const hasTrailing = inputPath.endsWith('/');
    return hasTrailing;
}
function EnsureTrailingSlash(inputPath) {
    if (!inputPath) {
        return '/';
    }
    const hasTrailing = HasTrailingSlash(inputPath);
    const pathParsed = hasTrailing ? inputPath : inputPath + '/';
    return pathParsed;
}
function EnsureNoPrefixSlash(inputPath) {
    const hasPrefix = HasPrefixSlash(inputPath);
    const pathParsed = hasPrefix ? inputPath.slice(1) : inputPath;
    return pathParsed;
}
function EnsurePrefixSlash(inputPath) {
    if (!inputPath) {
        return '/';
    }
    const hasPrefix = HasPrefixSlash(inputPath);
    const pathParsed = hasPrefix ? inputPath : '/' + inputPath;
    return pathParsed;
}
function EnsureNoTrailingSlash(inputPath) {
    const hasTrailing = HasTrailingSlash(inputPath);
    const pathParsed = hasTrailing ? inputPath.slice(0, -1) : inputPath;
    return pathParsed;
}
function EnsureAbsolutePathFile(filePath) {
    return EnsurePrefixSlash(EnsureNoTrailingSlash(filePath));
}
function EnsureAbsolutePathDir(folderPath) {
    return EnsurePrefixSlash(EnsureTrailingSlash(folderPath));
}
function EnsureGoogleStoragePathDir(folderPath) {
    return EnsureNoPrefixSlash(EnsureTrailingSlash(folderPath));
}
function EnsureGoogleStoragePathFile(filePath) {
    return EnsureNoPrefixSlash(EnsureNoTrailingSlash(filePath));
}
function GetRelativePath(currentDirectoryPath, absObjectPath) {
    const relativePath = absObjectPath.slice(currentDirectoryPath.length);
    return relativePath;
}
function GetParentDir(currentDirectoryPath) {
    const parsed = EnsurePrefixSlash(currentDirectoryPath);
    const parentPath = path.dirname(parsed);
    return EnsureGoogleStoragePathDir(parentPath);
}
function IsCurrentPath(currentDirectoryPath, absObjectPath) {
    const relativePath = GetRelativePath(currentDirectoryPath, absObjectPath);
    const isCurrentDir = !relativePath;
    return isCurrentDir;
}
function IsCurrentPathFile(currentDirectoryPath, absObjectPath) {
    const relativePath = GetRelativePath(currentDirectoryPath, absObjectPath);
    const slashSegments = relativePath.split('/');
    const isCurrentPathFile = slashSegments.length < 2;
    return isCurrentPathFile;
}
function IsObjNameDir(storageObjectName) {
    const filePathParsed = EnsurePrefixSlash(storageObjectName);
    const isDir = HasTrailingSlash(filePathParsed);
    return isDir;
}
function IsObjNameFile(storageObjectName) {
    return !IsObjNameDir(storageObjectName);
}
function GetSubDirectory(currentDirectoryPath, absObjectPath) {
    const relativePath = GetRelativePath(currentDirectoryPath, absObjectPath);
    const slashSegments = relativePath.split('/');
    const subDirectory = slashSegments.shift();
    return subDirectory;
}
function Add2ToPath(inputPath) {
    const dotSegments = inputPath.split('.');
    const extension = dotSegments.pop();
    const fileName = dotSegments.join('.') + ' (2)' + '.' + extension;
    return fileName;
}
function Add2ToPathDir(inputPath) {
    const pathWithoutSlash = EnsureNoTrailingSlash(inputPath);
    const pathWith2 = pathWithoutSlash + ' (2)';
    const newDirName = EnsureTrailingSlash(pathWith2);
    return newDirName;
}
function GetFileNameWithExtension(inputPath) {
    const fileNameWithExt = inputPath.split('/').pop();
    return fileNameWithExt;
}
function GetFileNameWithoutExtension(inputPath) {
    const fileNameWithExt = GetFileNameWithExtension(inputPath);
    const segments = fileNameWithExt.split('.');
    segments.pop(); // remove extension
    return segments.join('.');
}
function GetPathUpToLastBracket(inputPath) {
    const slashes = inputPath.split('/');
    slashes.pop();
    const dirPath = slashes.join('/');
    const fileName = inputPath.slice(dirPath.length);
    const bracketSegments = fileName.split('(');
    bracketSegments.pop();
    const fileNameWith = bracketSegments.join('(');
    if (fileName.includes('(')) {
        const filepathWithBracket = path.join(dirPath, fileNameWith + '(');
        return filepathWithBracket;
    }
    const dotSegments = inputPath.split('.');
    if (dotSegments.length < 2) {
        return inputPath;
    }
    dotSegments.pop();
    return dotSegments.join('.');
}
export const paths = {
    HasPrefixSlash,
    HasTrailingSlash,
    EnsureTrailingSlash,
    EnsureNoPrefixSlash,
    EnsurePrefixSlash,
    EnsureNoTrailingSlash,
    EnsureAbsolutePathFile,
    EnsureAbsolutePathDir,
    EnsureGoogleStoragePathDir,
    EnsureGoogleStoragePathFile,
    GetRelativePath,
    IsCurrentPath,
    IsCurrentPathFile,
    IsObjNameDir,
    IsObjNameFile,
    GetSubDirectory,
    GetParentDir,
    GetFileNameWithExtension,
    GetFileNameWithoutExtension,
    GetPathUpToLastBracket,
    Add2ToPath,
    Add2ToPathDir
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF0aHMuanMiLCJzb3VyY2VSb290IjoiL1ZvbHVtZXMvU2hpdmFuZy9QaSBTb2Z0d2FyZS9maWxlLW1hbmFnZXIvbmd4LWZpbGVtYW5hZ2VyL3Byb2plY3RzL25neC1maWxlbWFuYWdlci1hcGktZmlyZWJhc2Uvc3JjLyIsInNvdXJjZXMiOlsibGliL3V0aWxzL3BhdGhzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sS0FBSyxJQUFJLE1BQU0sTUFBTSxDQUFDO0FBRTdCLFNBQVMsY0FBYyxDQUFDLFNBQWlCO0lBQ3ZDLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFO1FBQ25DLE9BQU8sS0FBSyxDQUFDO0tBQ2Q7SUFDRCxNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVDLE9BQU8sU0FBUyxDQUFDO0FBQ25CLENBQUM7QUFFRCxTQUFTLGdCQUFnQixDQUFDLFNBQWlCO0lBQ3pDLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFO1FBQ25DLE9BQU8sS0FBSyxDQUFDO0tBQ2Q7SUFDRCxNQUFNLFdBQVcsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVDLE9BQU8sV0FBVyxDQUFDO0FBQ3JCLENBQUM7QUFFRCxTQUFTLG1CQUFtQixDQUFDLFNBQWlCO0lBQzVDLElBQUksQ0FBQyxTQUFTLEVBQUU7UUFDZCxPQUFPLEdBQUcsQ0FBQztLQUNaO0lBQ0QsTUFBTSxXQUFXLEdBQUcsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDaEQsTUFBTSxVQUFVLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUM7SUFDN0QsT0FBTyxVQUFVLENBQUM7QUFDcEIsQ0FBQztBQUVELFNBQVMsbUJBQW1CLENBQUMsU0FBaUI7SUFDNUMsTUFBTSxT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V0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDMUIsT0FBTyxTQUFTLENBQUM7S0FDbEI7SUFDRCxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDbEIsT0FBTyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQy9CLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxLQUFLLEdBQUc7SUFDbkIsY0FBYztJQUNkLGdCQUFnQjtJQUNoQixtQkFBbUI7SUFDbkIsbUJBQW1CO0lBQ25CLGlCQUFpQjtJQUNqQixxQkFBcUI7SUFDckIsc0JBQXNCO0lBQ3RCLHFCQUFxQjtJQUNyQiwwQkFBMEI7SUFDMUIsMkJBQTJCO0lBQzNCLGVBQWU7SUFDZixhQUFhO0lBQ2IsaUJBQWlCO0lBQ2pCLFlBQVk7SUFDWixhQUFhO0lBQ2IsZUFBZTtJQUNmLFlBQVk7SUFDWix3QkFBd0I7SUFDeEIsMkJBQTJCO0lBQzNCLHNCQUFzQjtJQUN0QixVQUFVO0lBQ1YsYUFBYTtDQUNkLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuXG5mdW5jdGlvbiBIYXNQcmVmaXhTbGFzaChpbnB1dFBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBpZiAoIWlucHV0UGF0aCB8fCAhaW5wdXRQYXRoLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBoYXNQcmVmaXggPSBpbnB1dFBhdGguc3RhcnRzV2l0aCgnLycpO1xuICByZXR1cm4gaGFzUHJlZml4O1xufVxuXG5mdW5jdGlvbiBIYXNUcmFpbGluZ1NsYXNoKGlucHV0UGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmICghaW5wdXRQYXRoIHx8ICFpbnB1dFBhdGgubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGhhc1RyYWlsaW5nID0gaW5wdXRQYXRoLmVuZHNXaXRoKCcvJyk7XG4gIHJldHVybiBoYXNUcmFpbGluZztcbn1cblxuZnVuY3Rpb24gRW5zdXJlVHJhaWxpbmdTbGFzaChpbnB1dFBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghaW5wdXRQYXRoKSB7XG4gICAgcmV0dXJuICcvJztcbiAgfVxuICBjb25zdCBoYXNUcmFpbGluZyA9IEhhc1RyYWlsaW5nU2xhc2goaW5wdXRQYXRoKTtcbiAgY29uc3QgcGF0aFBhcnNlZCA9IGhhc1RyYWlsaW5nID8gaW5wdXRQYXRoIDogaW5wdXRQYXRoICsgJy8nO1xuICByZXR1cm4gcGF0aFBhcnNlZDtcbn1cblxuZnVuY3Rpb24gRW5zdXJlTm9QcmVmaXhTbGFzaChpbnB1dFBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGhhc1ByZWZpeCA9IEhhc1ByZWZpeFNsYXNoKGlucHV0UGF0aCk7XG4gIGNvbnN0IHBhdGhQYXJzZWQgPSBoYXNQcmVmaXggPyBpbnB1dFBhdGguc2xpY2UoMSkgOiBpbnB1dFBhdGg7XG4gIHJldHVybiBwYXRoUGFyc2VkO1xufVxuXG5mdW5jdGlvbiBFbnN1cmVQcmVmaXhTbGFzaChpbnB1dFBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghaW5wdXRQYXRoKSB7XG4gICAgcmV0dXJuICcvJztcbiAgfVxuICBjb25zdCBoYXNQcmVmaXggPSBIYXNQcmVmaXhTbGFzaChpbnB1dFBhdGgpO1xuICBjb25zdCBwYXRoUGFyc2VkID0gaGFzUHJlZml4ID8gaW5wdXRQYXRoIDogJy8nICsgaW5wdXRQYXRoO1xuICByZXR1cm4gcGF0aFBhcnNlZDtcbn1cblxuZnVuY3Rpb24gRW5zdXJlTm9UcmFpbGluZ1NsYXNoKGlucHV0UGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgaGFzVHJhaWxpbmcgPSBIYXNUcmFpbGluZ1NsYXNoKGlucHV0UGF0aCk7XG4gIGNvbnN0IHBhdGhQYXJzZWQgPSBoYXNUcmFpbGluZyA/IGlucHV0UGF0aC5zbGljZSgwLCAtMSkgOiBpbnB1dFBhdGg7XG4gIHJldHVybiBwYXRoUGFyc2VkO1xufVxuXG5mdW5jdGlvbiBFbnN1cmVBYnNvbHV0ZVBhdGhGaWxlKGZpbGVQYXRoOiBzdHJpbmcpIHtcbiAgcmV0dXJuIEVuc3VyZVByZWZpeFNsYXNoKEVuc3VyZU5vVHJhaWxpbmdTbGFzaChmaWxlUGF0aCkpO1xufVxuXG5mdW5jdGlvbiBFbnN1cmVBYnNvbHV0ZVBhdGhEaXIoZm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gIHJldHVybiBFbnN1cmVQcmVmaXhTbGFzaChFbnN1cmVUcmFpbGluZ1NsYXNoKGZvbGRlclBhdGgpKTtcbn1cblxuZnVuY3Rpb24gRW5zdXJlR29vZ2xlU3RvcmFnZVBhdGhEaXIoZm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gIHJldHVybiBFbnN1cmVOb1ByZWZpeFNsYXNoKEVuc3VyZVRyYWlsaW5nU2xhc2goZm9sZGVyUGF0aCkpO1xufVxuXG5mdW5jdGlvbiBFbnN1cmVHb29nbGVTdG9yYWdlUGF0aEZpbGUoZmlsZVBhdGg6IHN0cmluZykge1xuICByZXR1cm4gRW5zdXJlTm9QcmVmaXhTbGFzaChFbnN1cmVOb1RyYWlsaW5nU2xhc2goZmlsZVBhdGgpKTtcbn1cblxuZnVuY3Rpb24gR2V0UmVsYXRpdmVQYXRoKFxuICBjdXJyZW50RGlyZWN0b3J5UGF0aDogc3RyaW5nLFxuICBhYnNPYmplY3RQYXRoOiBzdHJpbmdcbik6IHN0cmluZyB7XG4gIGNvbnN0IHJlbGF0aXZlUGF0aCA9IGFic09iamVjdFBhdGguc2xpY2UoY3VycmVudERpcmVjdG9yeVBhdGgubGVuZ3RoKTtcbiAgcmV0dXJuIHJlbGF0aXZlUGF0aDtcbn1cblxuZnVuY3Rpb24gR2V0UGFyZW50RGlyKGN1cnJlbnREaXJlY3RvcnlQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBwYXJzZWQgPSBFbnN1cmVQcmVmaXhTbGFzaChjdXJyZW50RGlyZWN0b3J5UGF0aCk7XG4gIGNvbnN0IHBhcmVudFBhdGggPSBwYXRoLmRpcm5hbWUocGFyc2VkKTtcbiAgcmV0dXJuIEVuc3VyZUdvb2dsZVN0b3JhZ2VQYXRoRGlyKHBhcmVudFBhdGgpO1xufVxuXG5mdW5jdGlvbiBJc0N1cnJlbnRQYXRoKFxuICBjdXJyZW50RGlyZWN0b3J5UGF0aDogc3RyaW5nLFxuICBhYnNPYmplY3RQYXRoOiBzdHJpbmdcbik6IGJvb2xlYW4ge1xuICBjb25zdCByZWxhdGl2ZVBhdGggPSBHZXRSZWxhdGl2ZVBhdGgoY3VycmVudERpcmVjdG9yeVBhdGgsIGFic09iamVjdFBhdGgpO1xuICBjb25zdCBpc0N1cnJlbnREaXIgPSAhcmVsYXRpdmVQYXRoO1xuICByZXR1cm4gaXNDdXJyZW50RGlyO1xufVxuXG5mdW5jdGlvbiBJc0N1cnJlbnRQYXRoRmlsZShcbiAgY3VycmVudERpcmVjdG9yeVBhdGg6IHN0cmluZyxcbiAgYWJzT2JqZWN0UGF0aDogc3RyaW5nXG4pOiBib29sZWFuIHtcbiAgY29uc3QgcmVsYXRpdmVQYXRoID0gR2V0UmVsYXRpdmVQYXRoKGN1cnJlbnREaXJlY3RvcnlQYXRoLCBhYnNPYmplY3RQYXRoKTtcbiAgY29uc3Qgc2xhc2hTZWdtZW50cyA9IHJlbGF0aXZlUGF0aC5zcGxpdCgnLycpO1xuICBjb25zdCBpc0N1cnJlbnRQYXRoRmlsZSA9IHNsYXNoU2VnbWVudHMubGVuZ3RoIDwgMjtcbiAgcmV0dXJuIGlzQ3VycmVudFBhdGhGaWxlO1xufVxuXG5mdW5jdGlvbiBJc09iak5hbWVEaXIoc3RvcmFnZU9iamVjdE5hbWU6IHN0cmluZykge1xuICBjb25zdCBmaWxlUGF0aFBhcnNlZCA9IEVuc3VyZVByZWZpeFNsYXNoKHN0b3JhZ2VPYmplY3ROYW1lKTtcbiAgY29uc3QgaXNEaXIgPSBIYXNUcmFpbGluZ1NsYXNoKGZpbGVQYXRoUGFyc2VkKTtcbiAgcmV0dXJuIGlzRGlyO1xufVxuXG5mdW5jdGlvbiBJc09iak5hbWVGaWxlKHN0b3JhZ2VPYmplY3ROYW1lOiBzdHJpbmcpIHtcbiAgcmV0dXJuICFJc09iak5hbWVEaXIoc3RvcmFnZU9iamVjdE5hbWUpO1xufVxuXG5mdW5jdGlvbiBHZXRTdWJEaXJlY3RvcnkoXG4gIGN1cnJlbnREaXJlY3RvcnlQYXRoOiBzdHJpbmcsXG4gIGFic09iamVjdFBhdGg6IHN0cmluZ1xuKTogc3RyaW5nIHtcbiAgY29uc3QgcmVsYXRpdmVQYXRoID0gR2V0UmVsYXRpdmVQYXRoKGN1cnJlbnREaXJlY3RvcnlQYXRoLCBhYnNPYmplY3RQYXRoKTtcbiAgY29uc3Qgc2xhc2hTZWdtZW50cyA9IHJlbGF0aXZlUGF0aC5zcGxpdCgnLycpO1xuICBjb25zdCBzdWJEaXJlY3RvcnkgPSBzbGFzaFNlZ21lbnRzLnNoaWZ0KCk7XG4gIHJldHVybiBzdWJEaXJlY3Rvcnk7XG59XG5cbmZ1bmN0aW9uIEFkZDJUb1BhdGgoaW5wdXRQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBkb3RTZWdtZW50cyA9IGlucHV0UGF0aC5zcGxpdCgnLicpO1xuICBjb25zdCBleHRlbnNpb24gPSBkb3RTZWdtZW50cy5wb3AoKTtcbiAgY29uc3QgZmlsZU5hbWUgPSBkb3RTZWdtZW50cy5qb2luKCcuJykgKyAnICgyKScgKyAnLicgKyBleHRlbnNpb247XG4gIHJldHVybiBmaWxlTmFtZTtcbn1cblxuZnVuY3Rpb24gQWRkMlRvUGF0aERpcihpbnB1dFBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHBhdGhXaXRob3V0U2xhc2ggPSBFbnN1cmVOb1RyYWlsaW5nU2xhc2goaW5wdXRQYXRoKTtcbiAgY29uc3QgcGF0aFdpdGgyID0gcGF0aFdpdGhvdXRTbGFzaCArICcgKDIpJztcbiAgY29uc3QgbmV3RGlyTmFtZSA9ICBFbnN1cmVUcmFpbGluZ1NsYXNoKHBhdGhXaXRoMik7XG4gIHJldHVybiBuZXdEaXJOYW1lO1xufVxuXG5mdW5jdGlvbiBHZXRGaWxlTmFtZVdpdGhFeHRlbnNpb24oaW5wdXRQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBmaWxlTmFtZVdpdGhFeHQgPSBpbnB1dFBhdGguc3BsaXQoJy8nKS5wb3AoKTtcbiAgcmV0dXJuIGZpbGVOYW1lV2l0aEV4dDtcbn1cblxuZnVuY3Rpb24gR2V0RmlsZU5hbWVXaXRob3V0RXh0ZW5zaW9uKGlucHV0UGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgZmlsZU5hbWVXaXRoRXh0ID0gR2V0RmlsZU5hbWVXaXRoRXh0ZW5zaW9uKGlucHV0UGF0aCk7XG4gIGNvbnN0IHNlZ21lbnRzID0gZmlsZU5hbWVXaXRoRXh0LnNwbGl0KCcuJyk7XG4gIHNlZ21lbnRzLnBvcCgpOyAvLyByZW1vdmUgZXh0ZW5zaW9uXG4gIHJldHVybiBzZWdtZW50cy5qb2luKCcuJyk7XG59XG5cbmZ1bmN0aW9uIEdldFBhdGhVcFRvTGFzdEJyYWNrZXQoaW5wdXRQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzbGFzaGVzID0gaW5wdXRQYXRoLnNwbGl0KCcvJyk7XG4gIHNsYXNoZXMucG9wKCk7XG4gIGNvbnN0IGRpclBhdGggPSBzbGFzaGVzLmpvaW4oJy8nKTtcbiAgY29uc3QgZmlsZU5hbWUgPSBpbnB1dFBhdGguc2xpY2UoZGlyUGF0aC5sZW5ndGgpO1xuICBjb25zdCBicmFja2V0U2VnbWVudHMgPSBmaWxlTmFtZS5zcGxpdCgnKCcpO1xuICBicmFja2V0U2VnbWVudHMucG9wKCk7XG4gIGNvbnN0IGZpbGVOYW1lV2l0aCA9IGJyYWNrZXRTZWdtZW50cy5qb2luKCcoJyk7XG4gIGlmIChmaWxlTmFtZS5pbmNsdWRlcygnKCcpKSB7XG4gICAgY29uc3QgZmlsZXBhdGhXaXRoQnJhY2tldCA9IHBhdGguam9pbihkaXJQYXRoLCBmaWxlTmFtZVdpdGggKyAnKCcpO1xuICAgIHJldHVybiBmaWxlcGF0aFdpdGhCcmFja2V0O1xuICB9XG4gIGNvbnN0IGRvdFNlZ21lbnRzID0gaW5wdXRQYXRoLnNwbGl0KCcuJyk7XG4gIGlmIChkb3RTZWdtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIGlucHV0UGF0aDtcbiAgfVxuICBkb3RTZWdtZW50cy5wb3AoKTtcbiAgcmV0dXJuIGRvdFNlZ21lbnRzLmpvaW4oJy4nKTtcbn1cblxuZXhwb3J0IGNvbnN0IHBhdGhzID0ge1xuICBIYXNQcmVmaXhTbGFzaCxcbiAgSGFzVHJhaWxpbmdTbGFzaCxcbiAgRW5zdXJlVHJhaWxpbmdTbGFzaCxcbiAgRW5zdXJlTm9QcmVmaXhTbGFzaCxcbiAgRW5zdXJlUHJlZml4U2xhc2gsXG4gIEVuc3VyZU5vVHJhaWxpbmdTbGFzaCxcbiAgRW5zdXJlQWJzb2x1dGVQYXRoRmlsZSxcbiAgRW5zdXJlQWJzb2x1dGVQYXRoRGlyLFxuICBFbnN1cmVHb29nbGVTdG9yYWdlUGF0aERpcixcbiAgRW5zdXJlR29vZ2xlU3RvcmFnZVBhdGhGaWxlLFxuICBHZXRSZWxhdGl2ZVBhdGgsXG4gIElzQ3VycmVudFBhdGgsXG4gIElzQ3VycmVudFBhdGhGaWxlLFxuICBJc09iak5hbWVEaXIsXG4gIElzT2JqTmFtZUZpbGUsXG4gIEdldFN1YkRpcmVjdG9yeSxcbiAgR2V0UGFyZW50RGlyLFxuICBHZXRGaWxlTmFtZVdpdGhFeHRlbnNpb24sXG4gIEdldEZpbGVOYW1lV2l0aG91dEV4dGVuc2lvbixcbiAgR2V0UGF0aFVwVG9MYXN0QnJhY2tldCxcbiAgQWRkMlRvUGF0aCxcbiAgQWRkMlRvUGF0aERpclxufTtcbiJdfQ==